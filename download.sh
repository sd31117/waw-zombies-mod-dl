#!/bin/bash
clear
#Authors: sd31117 and mshriver2

#prints splash ascii
echo "WC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1Y
LVgtWC1YLVgtWC1YLVgtWC1YLVgKfCAgICAgICAgICAgICAgICAgICAgICAgICAgICwsJ2BgYGBg
YGBgYGBgYGBgJywsICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKWCAgICAgICAgICAgICAg
ICAgICAgICAgICwnYCAgICAgICAgICAgICAgICAgICBgJywgICAgICAgICAgICAgICAgICAgICAg
ICAgIFgKfCAgICAgICAgICAgICAgICAgICAgICAsJyAgICAgICAgICAgICAgICAgICAgICAgICAn
LCAgICAgICAgICAgICAgICAgICAgICAgIHwKWCAgICAgICAgICAgICAgICAgICAgLCcgICAgICAg
ICAgOyAgICAgICA7ICAgICAgICAgICcsICAgICAgICAgICAgICAgICAgICAgIFgKfCAgICAgICAo
ICAgICAgICAgICA7ICAgICAgICAgICAgIDsgICAgIDsgICAgICAgICAgICAgOyAgICAgKCAgICAg
ICAgICAgICAgIHwKWCAgICAgICAgKSAgICAgICAgIDsgICAgICAgICAgICAgIDsgICAgIDsgICAg
ICAgICAgICAgIDsgICAgICkgICAgICAgICAgICAgIFgKfCAgICAgICAoICAgICAgICAgOyAgICAg
ICAgICAgICAgICA7ICAgOyAgICAgICAgICAgICAgICA7ICAgKCAgICAgICAgICAgICAgIHwKWCAg
ICAgICAgKSAgICA7ICAgOyAgICAsLCdgYGAnLCwsICAgOyA7ICAgLCwsJ2BgYCcsLCAgICA7ICAg
OyAgICAgICAgICAgICAgIFgKfCAgICAgICAoICAgIDsgJyw7ICAgJ2AgICAgICAgICAgYCcsICAg
LCdgICAgICAgICAgIGAnICAgOywnIDsgICAgICAgICAgICAgIHwKWCAgICAgICAgKSAgOyA7YCxg
JywgIF8tLX5+fn4tLV9fICAgJyAnICAgX18tLX5+fn4tLV8gICwnYCwnOyA7ICAgICApICAgICAg
IFgKfCAgICAgICAoICAgIDsgYCwnIDsgOiAgLyAgICAgICBcfn4tX19fLX5+LyAgICAgICBcICA6
IDsgJywnIDsgICAgICggICAgICAgIHwKWCAgKSAgICAgKSAgICknLCAgOyAgIC1fXCAgbyAgICAv
ICAnICAgJyAgXCAgICBvICAvXy0gICA7ICAsJyAgICAgICApICAgKCAgIFgKfCAoICAgICAoICAg
KCAgIGA7ICAgICAgfi1fX19fLS1+JyAgICAgICAnfi0tX19fXy1+ICAgICAgOycgICkgICAgICgg
ICAgICkgIHwKWCAgKSAgICAgKSAgICkgICA7ICAgICAgICAgICAgLGA7LCwsICAgLCwsOycsICAg
ICAgICAgICAgOyAgKCAgICAgICApICAgKCAgIFgKfCAoICAgICAoICAgKCAgLiAgOyAgICAgICAg
LCdgICAoX18gJ18nIF9fKSAgYCcsICAgICAgICA7ICAuICkgICAgICggICAgICkgIHwKWCAgKSAg
ICAgXC8gLCIuKS4gJzsgICAgLCdgICAgICAgICB+fiB+fiAgICAgICAgYCcsICAgIDsgIC4oLiIs
IFwvICApICAgKCAgIFgKfCAoICAgLCAsJ3wvLyAvICgvICw7ICAnICAgICAgICBfLS1+fi1+fi0t
XyAgICAgICAgJyAgOywgXCkgICAgXHwnLCAsICAgICkgIHwKWCAsKSAgLCBcLyBcfCAgXFwsLyAg
OzsgICAgICAgLDsgfF98IHwgfF98IDssICAgICAgIDs7ICBcLC8vICB8LyBcLyAsICAgLCAgIFgK
fCIsICAgLnwgXF8gfFwvIHwjXF8vOyAgICAgICA7X3wgOiBgfid+JyA6IHxfOyAgICAgICA7XF8v
I3wgXC98IF8vIHwuICAgLCIgIHwKWCMoLCcgICkgIFxcXCNcIFwjIy8pIzsgICAgIDogIGBcLyAg
ICAgICBcLyAgIDogICAgIDsjKFwjIy8gLyMvLy8gICggICcsKSMgLFgKfHwgKSB8IFwgfC8gLyMv
IHwjKCBcOyA7ICAgICA6ICAgICAgICAgICAgICAgOyAgICAgOyA7LyApI3wgXCNcIFx8IC8gfCAo
IHwpIHwKWFwgfC5cXCB8XF8vI3wgLyMpLCxgICAgOyAgICAgOy4vXF8gICAgIF8vXC47ICAgICA7
ICAgYCwsKCNcIHwjXF8vfCAvLy58IC8gLFgKfCBcXF8vIyB8I1wjIy8sLCdgICAgICAgIDsgICAg
IH5+LS18fnx+fC0tfn4gICAgIDsgICAgICAgYCcsLFwjIy8jfCAjXF8vLyBcL3wKWCAgIyMvIyAg
IywsJ2AgICAgICAgICAgICA7ICAgICAgICB+fn5+fiAgICAgICAgOyAgICAgICAgICAgIGAnLCwj
ICAjXCMjICAvL1gKfCMjIyNALCwnYCAgICAgICAgICAgICAgICAgYCcsICAgICAgICAgICAgICAg
LCdgICAgICAgICAgICAgICAgICBgJywsQCMjIyN8IHwKWCMsLCdgICAgICAgICAgICAgICAgICAg
ICAgICAgYCcsICAgICAgICAgLCdgICAgICAgICAgICAgICAgICAgICAgICAgYCcsLCMjI1gKfCcg
IHNwYiAgICAgICAgICAgICAgICAgICAgICAgICAgfn4tLS0tLX5+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGAnIHwKWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1Y
LVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgtWC1YLVgK" | base64 -d

#printf is needed to print newlines 
printf "\n"

# greets user and collects input
printf "### Welcome to the Linux COD Zombies WAW Custom Map Downloader! \e[32mv1.0.0\e[0m ###\n\n"

printf "\e[36mPlease enter the path to your waw mods folder dir [press enter for default]: \e[0m\n\n"

#stores cod mod folder path
read modPath

# sets default modpath if not given input by the user
if [ -z "$modPath" ]
    then
        modPath="~/.steam/steam/steamapps/compatdata/10090/pfx/drive_c/users/steamuser/Local Settings/Application Data/Activision/CoDWaW/mods/"
        printf "\nNo Directory Set. Using Default\n$modPath\n"
    else
        modPath=$modPath
        printf "\nDirectory Set!\n$modPath\n"
fi


printf "\n\e[36mPlease enter a number to select your mod archive type | [1: zip] or [2: tar.gz]: \e[0m\n"

#stores file extension type
read fileType

printf "\e[36mEnter the url to the archive containg the mod folders you wish to install: \e[0m\n"

#stores url to mod archive variable
read modURL

cd "$modPath"

printf "\e[36mDownloading files please wait...\e[0m\n"

#always quote var dereferences otherwise the shell confused the spaces in the vars value as spaces seperating multiple values
wget $modURL

printf "\e[36mDownload complete. Extracting and copying files...\e[0m\n"

#checks to see which filetype the user used and then extracts the archive 
case $fileType in

    1)
        #extracts zip
        unzip -a *.zip 

        #removes zip archive when finished
        rm *.zip   
        ;;

    2)
        #extracts tar.gz
        tar -xzvf *.tar.gz

        #removes tar.gz archive when finished
        rm *.tar.gz
        ;;
esac



printf "\e[32mYour mods were installed successfully! Thank you for using waw-zombies-mod-dl!\e[0m"